# Configuração da Migração IBM IKS → AWS EKS
# Copie este arquivo para migration.env e preencha com seus valores

# ==========================================
# AWS Configuration
# ==========================================
AWS_REGION=us-east-1
AWS_ACCOUNT_ID=123456789012

# ==========================================
# EKS Configuration
# ==========================================
EKS_CLUSTER_NAME=itau-eks-cluster
ENVIRONMENT=dev  # dev, test, ou prod

# ==========================================
# VPC Configuration
# ==========================================
# Se você já tem uma VPC, defina como "false" e preencha os IDs
CREATE_NEW_VPC=true
EXISTING_VPC_ID=vpc-xxxxx
EXISTING_SUBNET_IDS='["subnet-xxxx", "subnet-yyyy"]'
VPC_CIDR=10.0.0.0/16

# ==========================================
# Database Configuration (RDS)
# ==========================================
DB_USERNAME=airflow_admin
DB_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE
RDS_INSTANCE_CLASS=db.t3.medium
RDS_ALLOCATED_STORAGE=100

# ==========================================
# Redis as Cache Configuration
# ==========================================
REDIS_NODE_TYPE=cache.t3.medium

# ==========================================
# S3 Configuration
# ==========================================
PROJECT_NAME=itau-airflow-milvus
# Buckets serão criados como: ${PROJECT_NAME}-airflow-logs, etc.

# ==========================================
# IRSA (IAM Roles for Service Accounts)
# ==========================================
# Será criado pelo Terraform, mas você pode especificar se já existir
IRSA_ROLE_ARN=arn:aws:iam::${AWS_ACCOUNT_ID}:role/airflow-s3-access

# ==========================================
# OAuth2 Configuration
# ==========================================
# Para substituir IBMid/w3id
OAUTH_PROVIDER=https://seu-provider.com
OAUTH_CLIENT_ID=your-client-id
OAUTH_CLIENT_SECRET=your-client-secret
OAUTH_ISSUER_URL=https://seu-provider.com/oauth2

# ==========================================
# Domain Configuration
# ==========================================
BASE_DOMAIN=exemplo.com.br
AIRFLOW_SUBDOMAIN=airflow-test
MILVUS_SUBDOMAIN=milvus-dev
# URLs finais serão: ${AIRFLOW_SUBDOMAIN}.${BASE_DOMAIN}

# ==========================================
# ACM Certificate
# ==========================================
# ARN do certificado SSL no AWS Certificate Manager
ACM_CERTIFICATE_ARN=arn:aws:acm:${AWS_REGION}:${AWS_ACCOUNT_ID}:certificate/xxxxx

# ==========================================
# IBM Cloud Container Registry (PRIMARY TARGET)
# ==========================================
# Target Registry (Brazil Region) - where images will be migrated TO
TARGET_ICR_REGION=br.icr.io
TARGET_NAMESPACE=br-ibm-images
TARGET_REGISTRY=br.icr.io/br-ibm-images

# Source Registry (US Region) - where custom images are NOW
SOURCE_REGISTRY=us.icr.io/mmjc-cr

# Optional: JFrog Artifactory Configuration
# If you use JFrog as a proxy/mirror for IBM CR
# JFROG_PREFIX=artifactory.company.com/ibm-cr-remote/
# JFROG_ENABLED=true
# When enabled, images will also be documented as accessible via:
# ${JFROG_PREFIX}${TARGET_NAMESPACE}/image:tag

# ==========================================
# Container Registry (AWS ECR - OPTIONAL)
# ==========================================
# Only if you want to ALSO push to AWS ECR
# AWS_ECR_REGISTRY=${AWS_ACCOUNT_ID}.dkr.ecr.${AWS_REGION}.amazonaws.com
# AWS_ECR_ENABLED=false

# ==========================================
# Migration Options
# ==========================================
# Opções de migração
DRY_RUN=false
SKIP_BACKUP=false
PARALLEL_MIGRATION=true

# ==========================================
# IBM IKS (Source) Configuration
# ==========================================
# Para referência e backup
IBM_CLUSTER_NAME=mjc-cluster
IBM_REGION=us-south
IBM_ACCOUNT_ID=16bed81d1ae040c5bc9d55b6507ebdda
